<!doctype html>
<html lang="en">

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1">
    <meta name="author" content="niko-petteri.alanko@tuni.fi,jarno.matarmaa@tuni.fi,aino.heiskanen@tuni.fi">

    <script src="./lib/d3.min.js"></script>
    <script src="./lib/topojson.js"></script>
    <script src="./lib/jquery.min.js"></script>
    <script src="./lib/datamaps.world.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./lib/bootstrap-responsive.min.css">
    <link rel="stylesheet" type="text/css" href="./lib/bootstrap.min.css">
    <!-- Own stylesheet -->
    <link rel="stylesheet" type="text/css" href="./css/styles.css">

    <title>Corona</title>
  </head>
  <body>

    <main id="header">
      <h1>Welcome to assignment!</h1>
    </main>

    <div class="img-container"><img id="tau" alt="tau-logo" src="./img/tau_logo.png"></div>

    <div class="form-actions">
      <form name="countryform" id="countryform">
        <label for="country">Give a country:</label>
        <input type="text" name="country" id="country" placeholder="Country" 
               list="searchresults" autocomplete="off">
        <datalist id="searchresults"></datalist>
      </form>

      <form name="timeseriesForm" id="timeseriesForm">
        <button class="form-button" id="timeseries" type="button">Time series</button>
      </form>
    </div>

    <nav id="nav">
      <a class="nav_button" id="nav_corona">Corona</a>
      <a class="nav_button" id="nav_roadmap" href="roadmap.html">Roadmap</a> 
    </nav>

    <div class="table-wrapper-scroll-y my-custom-scrollbar" id="tablecont">
      <table class="table table-bordered table-striped mb-0" id="corona_stats">
        <thead>
          <tr>
            <th>Country</th>
            <th>Confirmed</th>
            <th>Deaths</th>
            <th>Recovered</th>
          </tr>
        </thead>
        <tbody id="tbody">
        </tbody>
      </table>
    </div>

    <div id="containerofmap">
      <div id="map-container">
        <div id="date"></div>
      </div>
    </div>

    <footer>
      <p id="slogan">Created with Passion -Proudly Group 9-</p>
      <p id="developers">Aino Heiskanen, Jarno Matarmaa, Niko Alanko</p>
    </footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous">
    </script>
    <!-- Own Javascript -->
    <script src="./js/config.js"></script>
    <script src="./js/index.js"></script>
    <script src="./js/table.js"></script>
    <script src="./js/datamapping.js"></script>
    <script src="./js/timeseries.js"></script>


    <script>
              let codeMap, caseMap, neighMap, timeMap;
			  var inte;
			  
			  
			  function stop() {
				clearInterval(inte);
			  };
			  
              (async () => {
			  console.log(`${config.baseURL}`);
                  const countries = await getJSON(`${config.baseURL}countries`);
                  codeMap = countryCodeMap(countries, INITIAL_CODES);
                  fillDataList(codeMap);
                  console.log("codemap");
                  console.log(codeMap);
                  const neighboursMapped = await getJSON(`${config.baseURL}neighbours`);
                  neighMap = mapNeighbours(neighboursMapped);
                  console.log(neighboursMapped);
                  const cases = await getJSON(`${config.baseURL}corona`);
                  caseMap = mapCasesWithCountrycodes(cases, codeMap);
                  initialFills(caseMap);
                  const timeseries = await getJSON(`${config.baseURL}corona/timeseries/`);
                  timeMap = mapTimeseries(timeseries, codeMap);
                  document.getElementById('country').addEventListener('input', inputHandler);
                  document.getElementById('countryform').addEventListener('submit', (e) => e.preventDefault());
                  document.getElementById("timeseries").onclick = function () {
					timeseriesFills(timeMap);
				  };
              })();
    </script>
  </body>

</html>
